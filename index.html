<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TaskCat - Organized Todo List</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style id="app-style">
    :root {
      --primary-color: #4f46e5;
      --sidebar-width: 280px;
      --header-height: 64px;
      --transition-speed: 0.3s;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      transition: background-color var(--transition-speed), color var(--transition-speed);
    }
    
    body.dark {
      background-color: #111827;
      color: #f9fafb;
    }
    
    .dark .bg-white {
      background-color: #1f2937;
    }
    
    .dark .text-gray-700 {
      color: #d1d5db;
    }
    
    .dark .border-gray-200 {
      border-color: #374151;
    }
    
    .dark .bg-gray-50 {
      background-color: #374151;
    }
    
    .dark .text-gray-500 {
      color: #9ca3af;
    }
    
    .dark .hover\:bg-gray-100:hover {
      background-color: #2d3748;
    }
    
    .sidebar {
      width: var(--sidebar-width);
      height: calc(100vh - var(--header-height));
      transition: transform var(--transition-speed);
      overflow-y: auto;
    }
    
    .sidebar.collapsed {
      transform: translateX(calc(-1 * var(--sidebar-width)));
    }
    
    .main-content {
      margin-left: var(--sidebar-width);
      transition: margin var(--transition-speed);
    }
    
    .main-content.expanded {
      margin-left: 0;
    }
    
    .category-pill {
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    
    .category-pill:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }
    
    .category-pill.active {
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      font-weight: 600;
    }
    
    .color-swatch {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.15s;
    }
    
    .color-swatch:hover {
      transform: scale(1.15);
    }
    
    .task-item {
      transition: background-color 0.2s, transform 0.2s;
    }
    
    .task-item:hover {
      background-color: rgba(0, 0, 0, 0.02);
    }
    
    .dark .task-item:hover {
      background-color: rgba(255, 255, 255, 0.05);
    }
    
    .checkbox-custom {
      border-radius: 4px;
      transition: background-color 0.2s, border-color 0.2s;
    }
    
    .completed .task-text {
      text-decoration: line-through;
      color: #9ca3af;
    }
    
    .dark .completed .task-text {
      color: #6b7280;
    }
    
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        z-index: 50;
      }
      
      .main-content {
        margin-left: 0;
      }
      
      .task-grid {
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      }
    }
    
    .modal {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
    }
    
    .modal.show {
      opacity: 1;
      visibility: visible;
    }
    
    /* Color selection */
    .category-color-options {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }

    /* Theme customization */
    .theme-colors {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 8px;
    }
  </style>
</head>
<body class="bg-gray-50">
  <!-- Header -->
  <header class="bg-white shadow-sm border-b border-gray-200 h-16 fixed w-full z-10">
    <div class="container mx-auto px-4 h-full flex items-center justify-between">
      <div class="flex items-center space-x-4">
        <button id="sidebar-toggle" class="p-2 rounded-md text-gray-500 hover:bg-gray-100">
          <i class="fas fa-bars"></i>
        </button>
        <h1 class="text-xl font-semibold text-gray-800">TaskCat</h1>
      </div>
      <div class="flex items-center space-x-2">
        <button id="add-task-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md flex items-center space-x-2">
          <i class="fas fa-plus"></i>
          <span class="hidden sm:inline">Add Task</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main container -->
  <div class="pt-16 flex h-screen">
    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar bg-white border-r border-gray-200 p-4">
      <div class="flex flex-col h-full">
        <div class="mb-6">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-medium text-gray-700">Categories</h2>
            <button id="add-category-btn" class="text-indigo-600 hover:text-indigo-800">
              <i class="fas fa-plus-circle"></i>
            </button>
          </div>

          <!-- Category list -->
          <div id="category-list" class="space-y-2">
            <div class="category-pill active px-4 py-2 rounded-full bg-indigo-100 text-indigo-800 flex items-center justify-between" data-id="all">
              <span>All Tasks</span>
              <span class="bg-indigo-200 text-indigo-800 rounded-full px-2 py-0.5 text-xs">12</span>
            </div>
            <div class="category-pill px-4 py-2 rounded-full bg-red-100 text-red-800 flex items-center justify-between" data-id="urgent">
              <span>Urgent</span>
              <span class="bg-red-200 text-red-800 rounded-full px-2 py-0.5 text-xs">3</span>
            </div>
            <div class="category-pill px-4 py-2 rounded-full bg-green-100 text-green-800 flex items-center justify-between" data-id="work">
              <span>Work</span>
              <span class="bg-green-200 text-green-800 rounded-full px-2 py-0.5 text-xs">5</span>
            </div>
            <div class="category-pill px-4 py-2 rounded-full bg-yellow-100 text-yellow-800 flex items-center justify-between" data-id="personal">
              <span>Personal</span>
              <span class="bg-yellow-200 text-yellow-800 rounded-full px-2 py-0.5 text-xs">4</span>
            </div>
          </div>
        </div>

        <div class="mt-auto">
          <!-- Theme Toggle -->
          <div class="border-t border-gray-200 pt-4 mt-4">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-sm font-medium text-gray-700">Theme</h3>
              <button id="theme-toggle" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-moon"></i>
              </button>
            </div>

            <!-- Theme customization -->
            <div class="mb-4">
              <h3 class="text-sm font-medium text-gray-700 mb-2">Accent Color</h3>
              <div class="theme-colors">
                <div class="color-swatch bg-indigo-500" data-color="indigo"></div>
                <div class="color-swatch bg-blue-500" data-color="blue"></div>
                <div class="color-swatch bg-green-500" data-color="green"></div>
                <div class="color-swatch bg-purple-500" data-color="purple"></div>
                <div class="color-swatch bg-pink-500" data-color="pink"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </aside>

    <!-- Main content -->
    <main id="main-content" class="main-content flex-1 p-6 overflow-auto">
      <div class="container mx-auto">
        <!-- Tasks header -->
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-semibold text-gray-800">All Tasks</h2>
          <div class="flex space-x-2">
            <div class="relative">
              <select id="sort-tasks" class="pl-3 pr-8 py-2 border border-gray-300 rounded-md appearance-none focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                <option value="date">Date Added</option>
                <option value="priority">Priority</option>
                <option value="name">Name</option>
              </select>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                <i class="fas fa-chevron-down text-xs"></i>
              </div>
            </div>
          </div>
        </div>

        <!-- Tasks container -->
        <div id="tasks-container" class="space-y-3">
          <!-- Task 1 -->
          <div class="task-item bg-white rounded-lg shadow-sm p-4 flex items-center" data-id="task1" data-category="work">
            <div class="flex items-center">
              <div class="checkbox-custom border-2 border-gray-300 w-5 h-5 mr-3 flex items-center justify-center">
                <i class="fas fa-check text-white text-xs hidden"></i>
              </div>
            </div>
            <div class="flex-1 ml-2">
              <div class="task-text font-medium text-gray-800">Complete project proposal</div>
              <div class="flex items-center mt-1 space-x-2">
                <span class="bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full">Work</span>
                <span class="text-gray-500 text-sm">Due tomorrow</span>
              </div>
            </div>
            <div class="flex space-x-2 text-gray-500">
              <button class="edit-task p-2 hover:text-indigo-600">
                <i class="fas fa-pencil-alt"></i>
              </button>
              <button class="delete-task p-2 hover:text-red-600">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          </div>
          
          <!-- Task 2 -->
          <div class="task-item bg-white rounded-lg shadow-sm p-4 flex items-center completed" data-id="task2" data-category="personal">
            <div class="flex items-center">
              <div class="checkbox-custom border-2 border-indigo-500 bg-indigo-500 w-5 h-5 mr-3 flex items-center justify-center">
                <i class="fas fa-check text-white text-xs"></i>
              </div>
            </div>
            <div class="flex-1 ml-2">
              <div class="task-text font-medium text-gray-800">Buy groceries</div>
              <div class="flex items-center mt-1 space-x-2">
                <span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-0.5 rounded-full">Personal</span>
              </div>
            </div>
            <div class="flex space-x-2 text-gray-500">
              <button class="edit-task p-2 hover:text-indigo-600">
                <i class="fas fa-pencil-alt"></i>
              </button>
              <button class="delete-task p-2 hover:text-red-600">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          </div>
          
          <!-- Task 3 -->
          <div class="task-item bg-white rounded-lg shadow-sm p-4 flex items-center" data-id="task3" data-category="urgent">
            <div class="flex items-center">
              <div class="checkbox-custom border-2 border-gray-300 w-5 h-5 mr-3 flex items-center justify-center">
                <i class="fas fa-check text-white text-xs hidden"></i>
              </div>
            </div>
            <div class="flex-1 ml-2">
              <div class="task-text font-medium text-gray-800">Submit tax documents</div>
              <div class="flex items-center mt-1 space-x-2">
                <span class="bg-red-100 text-red-800 text-xs px-2 py-0.5 rounded-full">Urgent</span>
                <span class="text-gray-500 text-sm">Due in 2 days</span>
              </div>
            </div>
            <div class="flex space-x-2 text-gray-500">
              <button class="edit-task p-2 hover:text-indigo-600">
                <i class="fas fa-pencil-alt"></i>
              </button>
              <button class="delete-task p-2 hover:text-red-600">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          </div>
          
          <!-- Task 4 -->
          <div class="task-item bg-white rounded-lg shadow-sm p-4 flex items-center" data-id="task4" data-category="work">
            <div class="flex items-center">
              <div class="checkbox-custom border-2 border-gray-300 w-5 h-5 mr-3 flex items-center justify-center">
                <i class="fas fa-check text-white text-xs hidden"></i>
              </div>
            </div>
            <div class="flex-1 ml-2">
              <div class="task-text font-medium text-gray-800">Schedule team meeting</div>
              <div class="flex items-center mt-1 space-x-2">
                <span class="bg-green-100 text-green-800 text-xs px-2 py-0.5 rounded-full">Work</span>
                <span class="text-gray-500 text-sm">This week</span>
              </div>
            </div>
            <div class="flex space-x-2 text-gray-500">
              <button class="edit-task p-2 hover:text-indigo-600">
                <i class="fas fa-pencil-alt"></i>
              </button>
              <button class="delete-task p-2 hover:text-red-600">
                <i class="fas fa-trash-alt"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Add Task Modal -->
  <div id="add-task-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-md mx-4">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-medium text-gray-900">Add Task</h3>
          <button class="close-modal text-gray-400 hover:text-gray-500">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <form id="add-task-form">
          <div class="mb-4">
            <label for="task-title" class="block text-sm font-medium text-gray-700">Task Title</label>
            <input type="text" id="task-title" name="title" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
          </div>
          
          <div class="mb-4">
            <label for="task-category" class="block text-sm font-medium text-gray-700">Category</label>
            <select id="task-category" name="category" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
              <option value="work">Work</option>
              <option value="personal">Personal</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
          
          <div class="mb-4">
            <label for="task-due-date" class="block text-sm font-medium text-gray-700">Due Date (Optional)</label>
            <input type="date" id="task-due-date" name="due-date" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
          </div>
          
          <div class="mb-4">
            <label for="task-notes" class="block text-sm font-medium text-gray-700">Notes (Optional)</label>
            <textarea id="task-notes" name="notes" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea>
          </div>
          
          <div class="flex justify-end space-x-3">
            <button type="button" class="close-modal px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
              Cancel
            </button>
            <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
              Add Task
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Add Category Modal -->
  <div id="add-category-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-md mx-4">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-medium text-gray-900">Add Category</h3>
          <button class="close-modal text-gray-400 hover:text-gray-500">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <form id="add-category-form">
          <div class="mb-4">
            <label for="category-name" class="block text-sm font-medium text-gray-700">Category Name</label>
            <input type="text" id="category-name" name="name" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">Color</label>
            <div class="category-color-options">
              <div class="color-swatch bg-red-500" data-color="red"></div>
              <div class="color-swatch bg-orange-500" data-color="orange"></div>
              <div class="color-swatch bg-yellow-500" data-color="yellow"></div>
              <div class="color-swatch bg-green-500" data-color="green"></div>
              <div class="color-swatch bg-teal-500" data-color="teal"></div>
              <div class="color-swatch bg-blue-500" data-color="blue"></div>
              <div class="color-swatch bg-indigo-500" data-color="indigo"></div>
              <div class="color-swatch bg-purple-500" data-color="purple"></div>
              <div class="color-swatch bg-pink-500" data-color="pink"></div>
              <div class="color-swatch bg-gray-500" data-color="gray"></div>
            </div>
            <input type="hidden" id="category-color" name="color" value="indigo">
          </div>
          
          <div class="flex justify-end space-x-3">
            <button type="button" class="close-modal px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
              Cancel
            </button>
            <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
              Add Category
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Edit Task Modal -->
  <div id="edit-task-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg w-full max-w-md mx-4">
      <div class="p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-medium text-gray-900">Edit Task</h3>
          <button class="close-modal text-gray-400 hover:text-gray-500">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <form id="edit-task-form">
          <input type="hidden" id="edit-task-id">
          <div class="mb-4">
            <label for="edit-task-title" class="block text-sm font-medium text-gray-700">Task Title</label>
            <input type="text" id="edit-task-title" name="title" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required>
          </div>
          
          <div class="mb-4">
            <label for="edit-task-category" class="block text-sm font-medium text-gray-700">Category</label>
            <select id="edit-task-category" name="category" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
              <option value="work">Work</option>
              <option value="personal">Personal</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
          
          <div class="mb-4">
            <label for="edit-task-due-date" class="block text-sm font-medium text-gray-700">Due Date (Optional)</label>
            <input type="date" id="edit-task-due-date" name="due-date" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
          </div>
          
          <div class="mb-4">
            <label for="edit-task-notes" class="block text-sm font-medium text-gray-700">Notes (Optional)</label>
            <textarea id="edit-task-notes" name="notes" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea>
          </div>
          
          <div class="flex justify-end space-x-3">
            <button type="button" class="close-modal px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
              Cancel
            </button>
            <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
              Save Changes
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script id="app-script">
    document.addEventListener('DOMContentLoaded', () => {
      // Local Storage Keys
      const TASKS_STORAGE_KEY = 'taskcat_tasks';
      const CATEGORIES_STORAGE_KEY = 'taskcat_categories';
      const THEME_STORAGE_KEY = 'taskcat_theme';
      
      // DOM Elements
      const sidebar = document.getElementById('sidebar');
      const mainContent = document.getElementById('main-content');
      const sidebarToggle = document.getElementById('sidebar-toggle');
      const themeToggle = document.getElementById('theme-toggle');
      const addTaskBtn = document.getElementById('add-task-btn');
      const addCategoryBtn = document.getElementById('add-category-btn');
      const addTaskModal = document.getElementById('add-task-modal');
      const addCategoryModal = document.getElementById('add-category-modal');
      const editTaskModal = document.getElementById('edit-task-modal');
      const categoryPills = document.querySelectorAll('.category-pill');
      const categoryList = document.getElementById('category-list');
      const tasksContainer = document.getElementById('tasks-container');
      const closeModalBtns = document.querySelectorAll('.close-modal');
      const addTaskForm = document.getElementById('add-task-form');
      const addCategoryForm = document.getElementById('add-category-form');
      const editTaskForm = document.getElementById('edit-task-form');
      const colorSwatches = document.querySelectorAll('.color-swatch');
      const themeColors = document.querySelectorAll('.theme-colors .color-swatch');
      
      // App State
      let currentTheme = localStorage.getItem(THEME_STORAGE_KEY) || 'light';
      let currentFilter = 'all';
      
      // Initialize the app
      initApp();
      
      // Event Listeners
      sidebarToggle.addEventListener('click', toggleSidebar);
      themeToggle.addEventListener('click', toggleTheme);
      addTaskBtn.addEventListener('click', () => showModal(addTaskModal));
      addCategoryBtn.addEventListener('click', () => showModal(addCategoryModal));
      
      categoryPills.forEach(pill => {
        pill.addEventListener('click', () => filterTasks(pill.dataset.id));
      });
      
      closeModalBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const modal = btn.closest('.modal');
          hideModal(modal);
        });
      });
      
      // Set up event delegation for tasks
      tasksContainer.addEventListener('click', (e) => {
        const taskItem = e.target.closest('.task-item');
        if (!taskItem) return;
        
        // Handle checkbox clicks
        const checkbox = e.target.closest('.checkbox-custom');
        if (checkbox) {
          toggleTaskCompletion(taskItem);
          return;
        }
        
        // Handle edit button clicks
        const editBtn = e.target.closest('.edit-task');
        if (editBtn) {
          showEditTaskModal(taskItem.dataset.id);
          return;
        }
        
        // Handle delete button clicks
        const deleteBtn = e.target.closest('.delete-task');
        if (deleteBtn) {
          deleteTask(taskItem.dataset.id);
          return;
        }
      });
      
      // Set up color swatch selection in the Add Category modal
      colorSwatches.forEach(swatch => {
        swatch.addEventListener('click', () => selectCategoryColor(swatch));
      });
      
      // Set up theme color selection
      themeColors.forEach(color => {
        color.addEventListener('click', () => setThemeColor(color.dataset.color));
      });
      
      // Form submissions
      addTaskForm.addEventListener('submit', handleAddTaskSubmit);
      addCategoryForm.addEventListener('submit', handleAddCategorySubmit);
      editTaskForm.addEventListener('submit', handleEditTaskSubmit);
      
      // App Functions
      function initApp() {
        // Initialize theme
        applyTheme(currentTheme);
        
        // Load data from localStorage
        // In a real app, these would be API calls
        loadCategories();
        loadTasks();
      }
      
      function toggleSidebar() {
        sidebar.classList.toggle('collapsed');
        mainContent.classList.toggle('expanded');
      }
      
      function toggleTheme() {
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        applyTheme(newTheme);
        currentTheme = newTheme;
        localStorage.setItem(THEME_STORAGE_KEY, newTheme);
      }
      
      function applyTheme(theme) {
        if (theme === 'dark') {
          document.body.classList.add('dark');
          themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
          document.body.classList.remove('dark');
          themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }
      }
      
      function setThemeColor(color) {
        // In a real app, this would update CSS variables and save to localStorage
        console.log(`Theme color set to: ${color}`);
        // For prototype purposes, we can change the accent color
        document.documentElement.style.setProperty('--primary-color', `var(--${color}-500)`);
      }
      
      function showModal(modal) {
        modal.classList.add('show');
      }
      
      function hideModal(modal) {
        modal.classList.remove('show');
      }
      
      function filterTasks(categoryId) {
        // Update active category
        document.querySelectorAll('.category-pill').forEach(pill => {
          if (pill.dataset.id === categoryId) {
            pill.classList.add('active');
          } else {
            pill.classList.remove('active');
          }
        });
        
        // Update tasks display based on filter
        currentFilter = categoryId;
        document.querySelector('h2').textContent = categoryId === 'all' ? 'All Tasks' : `${categoryId.charAt(0).toUpperCase() + categoryId.slice(1)} Tasks`;
        
        // In a real app, this would filter tasks from our data
        // For the prototype, we're toggling visibility of task items
        const taskItems = document.querySelectorAll('.task-item');
        taskItems.forEach(task => {
          if (categoryId === 'all' || task.dataset.category === categoryId) {
            task.style.display = 'flex';
          } else {
            task.style.display = 'none';
          }
        });
      }
      
      function toggleTaskCompletion(taskItem) {
        taskItem.classList.toggle('completed');
        const checkbox = taskItem.querySelector('.checkbox-custom');
        const checkIcon = checkbox.querySelector('.fa-check');
        
        if (taskItem.classList.contains('completed')) {
          checkbox.classList.add('bg-indigo-500', 'border-indigo-500');
          checkIcon.classList.remove('hidden');
        } else {
          checkbox.classList.remove('bg-indigo-500', 'border-indigo-500');
          checkIcon.classList.add('hidden');
        }
        
        // In a real app, this would update task status in the database
      }
      
      function selectCategoryColor(swatch) {
        document.querySelectorAll('.category-color-options .color-swatch').forEach(s => {
          s.style.outline = 'none';
        });
        swatch.style.outline = '2px solid #4f46e5';
        swatch.style.outlineOffset = '2px';
        document.getElementById('category-color').value = swatch.dataset.color;
      }
      
      function showEditTaskModal(taskId) {
        // In a real app, we would fetch the task data
        // For the prototype, we'll use the data attributes and text content
        const taskItem = document.querySelector(`.task-item[data-id="${taskId}"]`);
        const taskTitle = taskItem.querySelector('.task-text').textContent;
        const taskCategory = taskItem.dataset.category;
        
        // Populate the edit form
        document.getElementById('edit-task-id').value = taskId;
        document.getElementById('edit-task-title').value = taskTitle;
        document.getElementById('edit-task-category').value = taskCategory;
        
        // Show the modal
        showModal(editTaskModal);
      }
      
      function deleteTask(taskId) {
        if (confirm('Are you sure you want to delete this task?')) {
          const taskItem = document.querySelector(`.task-item[data-id="${taskId}"]`);
          taskItem.remove();
          
          // In a real app, this would make an API call to delete the task
          // For the prototype, we're just removing it from the DOM
        }
      }
      
      function handleAddTaskSubmit(e) {
        e.preventDefault();
        
        const taskTitle = document.getElementById('task-title').value;
        const taskCategory = document.getElementById('task-category').value;
        const taskDueDate = document.getElementById('task-due-date').value;
        
        // In a real app, this would make an API call to create the task
        console.log('Adding task:', { taskTitle, taskCategory, taskDueDate });
        
        // Reset form and hide modal
        addTaskForm.reset();
        hideModal(addTaskModal);
        
        // For prototype purposes, we can show a success message
        alert('Task added successfully! (This is a prototype, in the real app the task would be saved)');
      }
      
      function handleAddCategorySubmit(e) {
        e.preventDefault();
        
        const categoryName = document.getElementById('category-name').value;
        const categoryColor = document.getElementById('category-color').value;
        
        // In a real app, this would make an API call to create the category
        console.log('Adding category:', { categoryName, categoryColor });
        
        // Reset form and hide modal
        addCategoryForm.reset();
        hideModal(addCategoryModal);
        
        // For prototype purposes, we can show a success message
        alert('Category added successfully! (This is a prototype, in the real app the category would be saved)');
      }
      
      function handleEditTaskSubmit(e) {
        e.preventDefault();
        
        const taskId = document.getElementById('edit-task-id').value;
        const taskTitle = document.getElementById('edit-task-title').value;
        const taskCategory = document.getElementById('edit-task-category').value;
        const taskDueDate = document.getElementById('edit-task-due-date').value;
        
        // In a real app, this would make an API call to update the task
        console.log('Updating task:', { taskId, taskTitle, taskCategory, taskDueDate });
        
        // For the prototype, update the task in the DOM
        const taskItem = document.querySelector(`.task-item[data-id="${taskId}"]`);
        taskItem.querySelector('.task-text').textContent = taskTitle;
        taskItem.dataset.category = taskCategory;
        
        // Update category badge
        const categoryBadge = taskItem.querySelector('.bg-red-100, .bg-green-100, .bg-yellow-100');
        categoryBadge.textContent = taskCategory.charAt(0).toUpperCase() + taskCategory.slice(1);
        
        // Reset form and hide modal
        editTaskForm.reset();
        hideModal(editTaskModal);
      }
      
      function loadCategories() {
        // In a real app, this would make an API call to get categories
        // For the prototype, we're using hardcoded values in the HTML
      }
      
      function loadTasks() {
        // In a real app, this would make an API call to get tasks
        // For the prototype, we're using hardcoded values in the HTML
      }
    });
  </script>
</body>
</html>